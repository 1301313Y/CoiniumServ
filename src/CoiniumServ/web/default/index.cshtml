@using CoiniumServ.Coin.Helpers
@inherits Nancy.ViewEngines.Razor.NancyRazorViewBase<CoiniumServ.Server.Web.Models.IndexModel>

@{ Layout = "layout.cshtml"; }


<div class="row">
    <div class="col-lg-3 col-md-6">
        <div class="panel panel-success">
            <div class="panel-heading">
                <div class="row">
                    <div class="col-xs-3">
                        <i class="fa fa-tasks fa-5x"></i>
                    </div>
                    <div class="col-xs-9 text-right">
                        <div class="huge">@Model.Statistics.Hashrate.GetReadableHashrate()</div>
                        <div>Hashrate</div>
                    </div>
                </div>
            </div>
            <a href="#">
                <div class="panel-footer">
                    <span class="pull-left">View Details</span>
                    <span class="pull-right"><i class="fa fa-arrow-circle-right"></i></span>
                    <div class="clearfix"></div>
                </div>
            </a>
        </div>
    </div>
    <div class="col-lg-3 col-md-6">
        <div class="panel panel-info">
            <div class="panel-heading">
                <div class="row">
                    <div class="col-xs-3">
                        <i class="fa fa-users fa-5x"></i>
                    </div>
                    <div class="col-xs-9 text-right">
                        <div class="huge">@Model.Statistics.MinerCount</div>
                        <div>Miners</div>
                    </div>
                </div>
            </div>
            <a href="#">
                <div class="panel-footer">
                    <span class="pull-left">View Details</span>
                    <span class="pull-right"><i class="fa fa-arrow-circle-right"></i></span>
                    <div class="clearfix"></div>
                </div>
            </a>
        </div>
    </div>
    <div class="col-lg-3 col-md-6">
        <div class="panel panel-warning">
            <div class="panel-heading">
                <div class="row">
                    <div class="col-xs-3">
                        <i class="fa fa-flask fa-5x"></i>
                    </div>
                    <div class="col-xs-9 text-right">
                        <div class="huge">@Model.Statistics.Pools.Count</div>
                        <div>Pools</div>
                    </div>
                </div>
            </div>
            <a href="#">
                <div class="panel-footer">
                    <span class="pull-left">View Details</span>
                    <span class="pull-right"><i class="fa fa-arrow-circle-right"></i></span>
                    <div class="clearfix"></div>
                </div>
            </a>
        </div>
    </div>
    <div class="col-lg-3 col-md-6">
        <div class="panel panel-primary">
            <div class="panel-heading">
                <div class="row">
                    <div class="col-xs-3">
                        <i class="fa fa-gears fa-5x"></i>
                    </div>
                    <div class="col-xs-9 text-right">
                        <div class="huge">@Model.Statistics.Algorithms.Count</div>
                        <div>Algorithms</div>
                    </div>
                </div>
            </div>
            <a href="#">
                <div class="panel-footer">
                    <span class="pull-left">View Details</span>
                    <span class="pull-right"><i class="fa fa-arrow-circle-right"></i></span>
                    <div class="clearfix"></div>
                </div>
            </a>
        </div>
    </div>
</div>

<div class="row">     
    <!-- algorithms -->
    <div class="col-md-12">
        <div class="panel panel-info">
            <div class="panel-heading">
                <h3 class="panel-title"><i class="fa fa-cog"></i> Per Algorithm Statistics</h3>
            </div>
            <div class="panel-body">
                <div class="table-responsive">
                    <table class="table table-bordered table-hover table-striped tablesorter">
                        <thead>
                            <tr>
                                <th>Algorithm <i class="fa fa-sort"></i></th>
                                <th>Workers <i class="fa fa-sort"></i></th>
                                <th>Hashrate <i class="fa fa-sort"></i></th>
                                <th>Pools <i class="fa fa-sort"></i></th>
                            </tr>
                        </thead>
                        <tbody>
                            @foreach (var algorithm in Model.Statistics.Algorithms)
                            {
                                <tr>
                                    <td>@algorithm.Name</td>
                                    <td>@algorithm.MinerCount</td>
                                    <td>@algorithm.Hashrate.GetReadableHashrate()</td>
                                    <td>@algorithm.Count</td>
                                </tr>
                            }
                        </tbody>
                    </table>
                </div>
            </div>
        </div>
    </div>
    
</div>

<div class="row">
    <!-- pools -->
    <div class="col-md-12">
        <div class="panel panel-warning">
            <div class="panel-heading">
                <h3 class="panel-title"><i class="fa fa-flask"></i> Per Pool Statistics</h3>
            </div>
            <div class="panel-body">
                <div class="table-responsive">
                    <table class="table table-bordered table-hover table-striped tablesorter">
                        <thead>
                            <tr>
                                <th>Pool <i class="fa fa-sort"></i></th>
                                <th>Hashrate <i class="fa fa-sort"></i></th>
                                <th>Network <i class="fa fa-sort"></i></th>
                                <th>Difficulty <i class="fa fa-sort"></i></th>
                                <th>Workers <i class="fa fa-sort"></i></th>
                                <th>Algorithm <i class="fa fa-sort"></i></th>
                                <th>Current Block <i class="fa fa-sort"></i></th>
                                <th>Status</th>
                            </tr>
                        </thead>
                        <tbody>
                            @foreach (var pool in Model.Pools)
                            {
                                <tr>
                                    <td><a href="/pool/@pool.Config.Coin.Symbol/">@pool.Config.Coin.Name</a></td>
                                    <td>@pool.Hashrate.GetReadableHashrate()</td>
                                    <td>@pool.NetworkInfo.Hashrate.GetReadableHashrate()</td>
                                    <td>@pool.NetworkInfo.Difficulty</td>
                                    <td>@pool.MinerManager.Count</td>
                                    <td>@pool.Config.Coin.Algorithm</td>
                                    <td>@pool.NetworkInfo.Round</td>
                                    <td><span class="badge @(pool.NetworkInfo.Healthy? "btn-success" : "btn-danger")">@(pool.NetworkInfo.Healthy ? "healty" : "warnings!")</span></td>
                                </tr>
                            }</tbody>
                    </table>
                </div>
            </div>
        </div>
    </div>
     
</div>